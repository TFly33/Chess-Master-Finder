<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- Boostrap CSS HERE  -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Now some JS LINKS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <!-- My own style sheet -->
    <link rel="stylesheet" href="CSS/style2.css">
</head>

<body>
    <div class="surveyQuestions text-center">

        <h1> Survey Questions</h1>

    </div>

    <div class="container">
        <form>
            <div class="form-group">
                <label> Name (Required)</label>
                <input type="name" class="form-control" id="name">
            </div>

            <div class="form-group link">
                <label for="exampleFormControlInput1">Link to Photo Image (Required)</label>
                <input type="email" class="form-control" id="link" placeholder="">
            </div>

            <div class="form-group">
                <label for="exampleFormControlSelect1">
                    <h3>Question 1</h3>
                    <h6>You are a solid player, rarely sacrificing pieces, and always looking for a pragmatic solution
                        given the position. </h6>
                    <br>
                    <h6>1 = Strongly Disagree 5 = Strongly Agree</h6>
                </label>
                <select class="form-control ques1" id="exampleFormControlSelect1">
                    <option>1 </option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 </option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect1">
                    <h3>Question 2</h3>
                    <h6>You would rather play a beautiful combination and run the risk of losing than taking a
                        guaranteed win. </h6>
                </label>
                <select class="form-control ques2" id="exampleFormControlSelect1">
                    <option>1 </option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 </option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect1">
                    <h3>Question 3</h3>
                    <h6>You make decisions based on feel, and rarely calculate a line to it's full conclusion. </h6>
                </label>
                <select class="form-control ques3" id="exampleFormControlSelect1">
                    <option>1 </option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 </option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect1">
                    <h3>Question 4</h3>
                    <h6>You yearn for the days of the Romantic Era of chess, and the computer poisoned modern era
                        disappoints you. </h6>
                </label>
                <select class="form-control ques4" id="exampleFormControlSelect1">
                    <option>1 </option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 </option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect1">
                    <h3>Question 5</h3>
                    <h6>You prefer open games that start with 1.e4 </h6>
                </label>
                <select class="form-control ques5" id="exampleFormControlSelect1">
                    <option>1 </option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 </option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect1">
                    <h3>Question 6</h3>
                    <h6>You love endgames and the cold, hard calculation required when the queens come off the board.
                    </h6>
                </label>
                <select class="form-control ques6" id="exampleFormControlSelect1">
                    <option>1 </option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 </option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect1">
                    <h3>Question 7</h3>
                    <h6>You worship Morphy and Tal. Karpov makes you sick.</h6>
                </label>
                <select class="form-control ques7" id="exampleFormControlSelect1">
                    <option>1 </option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 </option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect1">
                    <h3>Question 8</h3>
                    <h6>You don't always win, but you are impossible to beat. Your opponent must beat you in the
                        opening, middlegame, and endgame, and they would be wise to end things while they have the
                        chance.</h6>
                </label>
                <select class="form-control ques8" id="exampleFormControlSelect1">
                    <option>1 </option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 </option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect1">
                    <h3>Question 9</h3>
                    <h6>You have moments of absolute brilliance, but on your worst day you're truly awful.</h6>
                </label>
                <select class="form-control ques9" id="exampleFormControlSelect1">
                    <option>1 </option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 </option>
                </select>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect1">
                    <h3>Question 10</h3>
                    <h6>To you, chess is not about memorization. Chess is art, and we merely get to guide the brush.
                    </h6>
                </label>
                <select class="form-control ques10" id="exampleFormControlSelect1">
                    <option>1 </option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5 </option>
                </select>
            </div>
        </form>

        <!-- Adding a "Done" Button -->
        <a class="btn btn-primary btn-lg" id="submit-btn" role="button" href="#" data-toggle="modal"
            data-target="#nearestMatch">Find my Chessmaster!</a>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="nearestMatch" tabindex="-1" role="dialog" aria-labelledby="friendmatch"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">You approach chess like:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body nearestMatch text-center">
                    
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-dark" data-dismiss="modal" id="close-btn">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- JQUERY -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script type="text/javascript">

        $("#submit-btn").on("click", function (event) {
            event.preventDefault();

            // NEED TO GRAB THE USER INPUT
            var newChessmasters = {
                name: $("#name").val().trim(),
                photo: $("#link").val().trim(),
                scores: [
                    $(".ques1").val().trim(),
                    $(".ques2").val().trim(),
                    $(".ques3").val().trim(),
                    $(".ques4").val().trim(),
                    $(".ques5").val().trim(),
                    $(".ques6").val().trim(),
                    $(".ques7").val().trim(),
                    $(".ques8").val().trim(),
                    $(".ques9").val().trim(),
                    $(".ques10").val().trim(),
                ]
            };
            console.log(newChessmasters);
            console.log(newChessmasters.scores[1]);
            console.log(newChessmasters.scores[9]);

            $.post("/api/friends", newChessmasters)
                .then(function (data) {
                    console.log("data = ?");
                    console.log(data);

                    var nearestMatch = data;
                    console.log(nearestMatch);
                    console.log("nearestMatch.name = " + nearestMatch.name);

                    $(".nearestMatch").empty();
                    $(".nearestMatch").append("<div><h5>" + nearestMatch.name + "</h2></div><div><img src=\"" + nearestMatch.photo + "\" class=\"img-fluid\"></div>");


                });

        });

    </script>
</body>